<!doctype html>
<html class="no-js" lang="en">
    
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Roseballah Fashion Studio</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="../logo1.png">
        <link rel="apple-touch-icon" href="public/apple-touch-icon.html">
        <!-- Place favicon.ico in the root directory -->

		<!-- all css here -->
		<!-- bootstrap v3.3.6 css -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
		<!-- animate css -->
        <link rel="stylesheet" href="css/animate.css">
		<!-- jquery-ui.min css -->
        <link rel="stylesheet" href="css/jquery-ui.min.css">
		<!-- meanmenu css -->
        <link rel="stylesheet" href="css/meanmenu.min.css">
		<!-- owl.carousel css -->
        <link rel="stylesheet" href="css/owl.carousel.min.css">
        <!-- bxslider css -->
        <link rel="stylesheet" href="css/jquery.bxslider.css">
        <!-- magnific popup css -->
        <link rel="stylesheet" href="css/magnific-popup.css">
        <!-- Bootstrap Touchspin css -->
         <link rel="stylesheet" href="css/jquery.bootstrap-touchspin.min.css">
		<!-- font-awesome css -->
        <link rel="stylesheet" href="css/font-awesome.min.css">
		<!-- style css -->
		<link rel="stylesheet" href="style.css">
		<!-- responsive css -->
        <link rel="stylesheet" href="css/responsive.css">
		<!-- modernizr css -->
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <!--Preloader area start-->
        <div id="loader_wrapper">
            <div class="loader"></div>
        </div>
        <!--Preloader area end-->
        <!--Header area start here-->
        <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="header-top">
                        <div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 pd-0">
                            <div class="contact-info-top">
                                <ul class="list-inline">
                                    <li><img src="images/icons/5.png" alt=""/><span>MON ‚Äì SAT: 8.00‚Äì17.00</span></li>
                                    <li><img src="images/icons/6.png" alt=""/><span>0745 631352 / 57762</span></li>
                                    <li><img src="images/icons/7.png" alt=""/><span>rosebellahstylist@gmail.com</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-3 col-xs-12 pd-0">
                            <div class="top-button text-right">
                                <a href="booking.html" class="btn4"><span>Book Now</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="sticky">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="main-header">
                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                <div class="logo-area">
                                    <a href="../index.html"><img src="images/logo/logo.jpg" alt="Rosebellah Fashion Studio"/></a>
                                </div>
                            </div>
                            <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                                <div class="menu-area">
                                    <nav>
                                        <ul class="list-inline">
                                            <li><a href="../index.html">Home</a></li>
                                            <li><a href="services.html">Services</a></li>
                                            <li><a href="gallery.html">Gallery</a></li>
                                            
                                           
                                            <li><a href="contact.html">Contact</a></li>
                                            
                                        </ul>
                                    </nav>
                                </div>
                            </div>

                            

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Responsive Menu area-->
        <div class="mobile-menu-area">
            <div class="container">
                <div class="row">
                  <div class="col-md-12">
                    <div class="mobile-menu">
                        <nav id="dropdown">
                            <ul>
                                <li><a href="../index.html">Home</a></li>
                                <li><a href="about.html">About</a></li>
                                <li><a href="services.html">Services</a></li>
                                <li><a href="gallery.html">Gallery</a></li>
                                <li>
                                    
                                </li>
                                <li>
                                    
                                </li>
                                <li><a href="contact.html">Contact</a></li>
                            </ul>
                        </nav>
                    </div>          
                  </div>
                </div>
            </div>
        </div>
        <!--Responsive Menu area End-->

    </header>
        <!--Header area end here-->
          <!--Breadcumb area start here-->
        <div class="breadcumb-area jarallax">
			<div class="container">
				<div class="row">
					<div class="col-lg-6 col-md-6 col-sm-8 col-xs-12 full_width">
						<div class="indx_title_left_wrapper">
							<h2> booking</h2>
						</div>
					</div>
					<div class="col-lg-6 col-md-6 col-sm-4 col-xs-12 full_width">
						<div class="indx_title_right_wrapper">
							<ul>
								<li><a href="../index.html">Home</a> &nbsp;&nbsp;&nbsp;> </li>
								<li> booking</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
        <!--Breadcumb area end here-->


  <!--Booking area start here-->
<section 
  id="booking" 
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 70vh; /* Ensures it sits nicely between header and footer */
    background: #f8f8f8;
  "
>
  <div style="
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    text-align: center;
    width: 90%;
    max-width: 420px;
  ">
    <h2 style="margin-bottom: 20px;">Book an Appointment</h2>

    <form id="booking-form" style="display: flex; flex-direction: column; gap: 12px;">
      <input id="full-name" type="text" placeholder="Full Name" required 
        style="padding:10px; border-radius:5px; border:1px solid #ccc;">
      <input id="email" type="email" placeholder="Email" required 
        style="padding:10px; border-radius:5px; border:1px solid #ccc;">
      <input id="service" type="text" placeholder="Service (e.g., Suit Tailoring)" required 
        style="padding:10px; border-radius:5px; border:1px solid #ccc;">
      <button type="submit" 
        style="background:#222; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
        Book Now
      </button>
    </form>

    <p id="status" style="margin-top:15px; font-weight:bold; color:green;"></p>
  </div>

  <!-- Supabase Booking Logic -->
  <script type="module">

    // ‚öôÔ∏è Initialize Supabase
   import { supabase } from '../supabase-config.js';

    // üîê Check login
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
      window.location.href = "../login.html";
    }

    // üïí Smart scheduling logic
    async function getNextAvailableSlot() {
      const today = new Date();
      let date = new Date(today);
      date.setDate(today.getDate() + 1); // next day

      // Skip Sundays (non-working day)
      while (date.getDay() === 0) {
        date.setDate(date.getDate() + 1);
      }

      const dateStr = date.toISOString().split("T")[0];
      const { data: bookings } = await supabase
        .from("bookings")
        .select("*")
        .eq("date", dateStr);

      const count = bookings ? bookings.length : 0;
      const slotIndex = Math.floor(count / 3); // 3 clients/hour
      const hour = 8 + slotIndex;

      if (hour >= 17) {
        // Move to next working day
        date.setDate(date.getDate() + 1);
        while (date.getDay() === 0) {
          date.setDate(date.getDate() + 1);
        }
        return { date: date.toISOString().split("T")[0], time: "8:00 AM" };
      }

      const timeLabel = hour < 12 ? `${hour}:00 AM` : `${hour - 12}:00 PM`;
      return { date: date.toISOString().split("T")[0], time: timeLabel };
    }

    // üìù Booking submission
    document.getElementById("booking-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fullName = document.getElementById("full-name").value.trim();
      const email = document.getElementById("email").value.trim();
      const service = document.getElementById("service").value.trim();
      const statusMsg = document.getElementById("status");

      if (!fullName || !email || !service) {
        statusMsg.style.color = "red";
        statusMsg.textContent = "Please fill all fields.";
        return;
      }

      const { date, time } = await getNextAvailableSlot();

      const { error } = await supabase.from("bookings").insert([
        { user_id: user.id, service, date, status: "pending" }
      ]);

      if (error) {
        statusMsg.style.color = "red";
        statusMsg.textContent = "Error: " + error.message;
      } else {
        statusMsg.style.color = "green";
        statusMsg.textContent = `‚úÖ Booking confirmed for ${date} at ${time}`;
      }
    });
  </script>
</section>
<!--Booking area end here-->


        <!--Booking area end here-->


        

        <!--Footer area start here-->
         <!-- ==================== FOOTER AREA START ==================== -->
<footer class="footer-area bg-img jarallax" style="background-color:#111; color:#fff; padding:60px 0;">
    <div class="container">
        <div class="row">

            <!-- Brand / About -->
            <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="footer-widget">
                    <h3 class="widget-title">Rosebellah Fashion Studio</h3>
                    <p>
                        Led by <strong>Rosebellah Otieno</strong>, our modern Kenyan tailoring studio 
                        redefines elegance through bespoke designs, precise craftsmanship and 
                        creative expression. Every piece tells a story ‚Äî tailored to perfection.
                    </p>
                    <ul class="list-inline social-icons">
                        <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-whatsapp"></i></a></li>
                    </ul>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="col-lg-2 col-md-6 col-sm-12">
                <div class="footer-widget">
                    <h3 class="widget-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="services.html">Our Services</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </div>

            <!-- Services -->
            <div class="col-lg-3 col-md-6 col-sm-12">
                <div class="footer-widget">
                    <h3 class="widget-title">Tailoring Services</h3>
                    <ul class="footer-links">
                        <li><a href="#">Custom Suits & Jackets</a></li>
                        <li><a href="#">Bridal & Evening Gowns</a></li>
                        <li><a href="#">African-Inspired Wear</a></li>
                        <li><a href="#">Alterations & Repairs</a></li>
                        <li><a href="#">Uniform & Corporate Design</a></li>
                    </ul>
                </div>
            </div>

            <!-- Contact Info -->
            <div class="col-lg-3 col-md-6 col-sm-12">
                <div class="footer-widget">
                    <h3 class="widget-title">Get in Touch</h3>
                    <ul class="contact-info">
                        <li><i class="fa fa-map-marker"></i> Rosebellah Fashion Studio, Nairobi, Kenya</li>
                        <li><i class="fa fa-phone"></i> 0745 631352 / 57762</li>
                        <li><i class="fa fa-envelope"></i> rosebellahstylist@gmail.com</li>
                        <li><i class="fa fa-clock-o"></i> Mon ‚Äì Sat: 8:00am ‚Äì 6:00pm</li>
                    </ul>
                </div>
            </div>

        </div>

        <hr style="border-color:rgba(255,255,255,0.2); margin:40px 0;">

        <div class="row">
            <div class="col-lg-12 text-center">
                <p style="margin-bottom:0; color:#bbb;">
                    &copy; <script>document.write(new Date().getFullYear());</script> 
                    <strong>Rosebellah Fashion Studio</strong> | Designed with ‚ù§Ô∏è in Kenya.
                </p>
            </div>
        </div>
    </div>
</footer>
<!-- ========
        <!--Footer area end here-->
        <!-- all js here -->
        <!-- jquery latest version -->
        <script src="js/vendor/jquery-3.2.1.min.js"></script>
        <!-- tether js -->
        <script src="js/tether.min.js"></script>
        <!-- bootstrap js -->
        <script src="js/bootstrap.min.js"></script>
        <!-- owl.carousel js -->
        <script src="js/owl.carousel.min.js"></script>
        <!-- bxslider js -->
        <script src="js/jquery.bxslider.min.js"></script>
        <!-- isotope js -->
        <script src="js/isotope.pkgd.min.js"></script>
        <!-- magnific popup js -->
        <script src="js/jquery.magnific-popup.min.js"></script>
        <!-- meanmenu js -->
        <script src="js/jquery.meanmenu.js"></script>
        <!-- jarallax js -->
        <script src="js/jarallax.min.js"></script>
        <!-- jquery-ui js -->
        <script src="js/jquery-ui.min.js"></script>
        <!-- Bootstrap Touchspin js -->
        <script src="js/jquery.bootstrap-touchspin.min.js"></script>
        <!-- Progressbar Animation js -->
        <script src="js/jquery.waypoints.min.js"></script>
        <script src="js/jquery.counterup.min.js"></script>
        <!-- wow js -->
        <script src="js/wow.min.js"></script>
        <!-- plugins js -->
        <script src="js/plugins.js"></script>
        <!-- main js -->
        <script src="js/main.js"></script>

    </body>


</html>
